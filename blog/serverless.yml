service: blog
frameworkVersion: '3'

provider:
  name: aws
  runtime: nodejs18.x
  tracing: true
  environment:
    NODE_ENV: ${opt:stage}
    Table_NAME: HowzitHoozle-free-db
  httpApi:
    authorizers:
      cognitoAuthorizer:
        type: jwt
        identitySource: $request.header.Authorization
        issuerUrl: https://cognito-idp.us-east-1.amazonaws.com/us-east-1_8XqxLcWFP
        audience:
          - 2cbsuopm63g2gopfvjl35vt6mi
    cors: true

custom:
  tableName: HowzitHoozle-free-db

functions:
  getAllEntries:
    handler: dist/getBlogPosts/httpHandler.handler
    events:
      - httpApi:
          path: /blog/getAll
          method: GET
  getAllEntriesInfinite:
    handler: dist/getBlogPostsInfinite/httpHandler.handler
    events:
      - httpApi:
          path: /blog/getAllInfinite/{currentPageId}
          method: GET
  updateEntry:
    handler: dist/updateBlogPost/httpHandler.handler
    events:
      - httpApi:
          path: /blog/update/{entityId}
          method: PUT
          authorizer:
            name: cognitoAuthorizer
#  deleteEntry:
#    handler: dist/deleteBlogPost/httpHandler.handler
#    events:
#      - httpApi:
#          path: /blog/delete/{id}
#          method: DELETE
#          authorizer:
#            name: cognitoAuthorizer
#  writeBlogPost:
#    handler: dist/writeBlogPost/httpHandler.writeBlogPost
#    events:
#      - httpApi:
#          path: /blog/write
#          method: POST
#          authorizer:
#            name: cognitoAuthorizer
